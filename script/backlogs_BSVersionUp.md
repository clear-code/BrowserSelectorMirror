# BSVersionUp の仕様

「BSVersionUp」は、BrowserSelector のバージョンアップ用スクリプトである

## バージョン情報の体系

- `vx.y.z`とする。先頭の「v」に続けて、0 以上の 3 つの整数 x y z を.（ピリオド）で区切って表記する
- x,y,z の値域はいずれも 0-99（数字 1 桁または 2 桁）とする
- 一部のファイルに、4 つの整数でバージョン情報を保持する行もある。4 つめは「0」固定とする

## 現在の機能

- バージョン番号を`$new_version` の値へ一括更新する
- ProductCode と PackageCode の GUID を付け直す

### 注意事項

実行環境上で事前に PowerShell スクリプトの実行権限を付与しておくこと。詳細は<https://go.microsoft.com/fwlink/?LinkID=135170> を参照

### 実行手順

1. エクスプローラー上で`script` フォルダを右クリックして「PowerShell ウィンドウをここで開く」を選択する
2. PowerShell ウィンドウで下記を実施する

```PowerShell
~\browserselector\script> ./BSVersionUp.ps1
```

## バックログ

`BSVersionUp`スクリプトの「完成目標」です。

- `newversion` は引数で与えるようにする（例：`./BSVersionUp.ps1 2.2.4`）
- `newversion`が不正な値の場合は、更新せずに終了する（「不正な」の定義は別途）
- 引数なしで`./BSVersionUp.ps1` を実行した時は、リポジトリ内のバージョン情報の grep 結果を表示する
- もしリポジトリ内の既存の各バージョン情報が一致していない場合は、更新せずに終了する

### 更新モード

第 2 引数に「更新モード」を指定できるようにする

#### increment（デフォルト値・省略可）

- x,y,z のいずれかを 1 加算するとき
- 加算された後ろの値を「0」にする

  2.2.3  
  → 2.2.4  
  → 2.3.0  
  → 3.0.0

#### leap

- 2 以上加算するとき
- 複数の値を同時に更新するとき

  2.2.3  
  → 2.2.5  
  → 2.3.1  
  → 3.0.2

#### backward

- 任意のバージョンに戻すとき

  2.2.3  
  → 2.2.2  
  → 2.1.0  
  → 1.9.1
